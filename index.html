<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeKit - æ—¶å…‰å·¥å…·ç®±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent-color: #22d3ee;
            --success-color: #10b981;
            --danger-color: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-color);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* èƒŒæ™¯åŠ¨ç”» */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.1;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            animation: gradient 15s ease infinite;
        }

        @keyframes gradient {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        /* ä¸»é¡µæ ·å¼ */
        .home-page {
            min-height: 100vh;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 4rem;
            animation: fadeInDown 0.8s ease;
        }

        .header h1 {
            font-size: 3.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .header p {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .tool-card {
            background: var(--card-bg);
            border-radius: 1rem;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(99, 102, 241, 0.1));
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .tool-card:hover::before {
            transform: translateX(0);
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .tool-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .tool-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .tool-description {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* å·¥å…·é¡µé¢æ ·å¼ */
        .tool-page {
            display: none;
            min-height: 100vh;
            padding: 2rem;
        }

        .tool-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 3rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .back-btn {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .back-btn:hover {
            background: var(--primary-color);
            transform: translateX(-5px);
        }

        .tool-content {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 1rem;
            padding: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        /* é€šç”¨æŒ‰é’®æ ·å¼ */
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.25rem;
        }

        .btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.secondary {
            background: var(--card-bg);
            border: 1px solid var(--primary-color);
        }

        .btn.success {
            background: var(--success-color);
        }

        .btn.danger {
            background: var(--danger-color);
        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        input, select, textarea {
            background: var(--bg-color);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            width: 100%;
            margin-bottom: 1rem;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* ç§’è¡¨æ ·å¼ */
        .stopwatch-display {
            font-size: 4rem;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 2rem 0;
            color: var(--accent-color);
        }

        .lap-times {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 2rem;
        }

        .lap-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ç•ªèŒ„é’Ÿæ ·å¼ */
        .pomodoro-timer {
            text-align: center;
        }

        .pomodoro-display {
            font-size: 5rem;
            font-weight: bold;
            margin: 2rem 0;
        }

        .pomodoro-status {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* æ—¶é’Ÿæ ·å¼ */
        .clock-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2rem 0;
        }

        .analog-clock {
            width: 200px;
            height: 200px;
            border: 3px solid var(--primary-color);
            border-radius: 50%;
            position: relative;
            margin: 0 2rem;
            background: rgba(255, 255, 255, 0.02);
        }
        
        /* æ—¶é’Ÿåˆ»åº¦ */
        .analog-clock::before {
            content: '12';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            font-weight: bold;
            color: var(--text-secondary);
        }
        
        .analog-clock::after {
            content: '6';
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            font-weight: bold;
            color: var(--text-secondary);
        }

        .clock-hand {
            position: absolute;
            left: 50%;
            bottom: 50%;
            transform-origin: bottom;
            background: var(--text-primary);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hour-hand {
            width: 4px;
            height: 60px;
            margin-left: -2px;
            transform: rotate(0deg);
        }

        .minute-hand {
            width: 3px;
            height: 80px;
            margin-left: -1.5px;
            transform: rotate(0deg);
        }

        .second-hand {
            width: 2px;
            height: 90px;
            margin-left: -1px;
            background: var(--accent-color);
            transform: rotate(0deg);
        }
        
        /* æ—¶é’Ÿåˆ»åº¦æ ‡è®° */
        .clock-mark {
            position: absolute;
            width: 2px;
            height: 10px;
            background: var(--text-secondary);
            opacity: 0.5;
            left: 50%;
            top: 5px;
            transform-origin: center 95px;
        }

        .clock-center {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--primary-color);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .digital-time {
            font-size: 2rem;
            font-family: 'Courier New', monospace;
            margin-top: 1rem;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }

            .tools-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .tool-content {
                padding: 1.5rem;
            }

            .stopwatch-display, .pomodoro-display {
                font-size: 3rem;
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- ä¸»é¡µ -->
    <div id="homePage" class="home-page">
        <div class="header">
            <h1>TimeKit</h1>
            <p>ä½ çš„ä¸“ä¸šæ—¶é—´ç®¡ç†å·¥å…·ç®±</p>
        </div>

        <div class="tools-grid">
            <div class="tool-card" onclick="showTool('stopwatch')">
                <div class="tool-icon">â±ï¸</div>
                <h3 class="tool-title">ç§’è¡¨</h3>
                <p class="tool-description">ç²¾ç¡®è®¡æ—¶ï¼Œæ”¯æŒåˆ†æ®µè®¡æ—¶å’Œæš‚åœåŠŸèƒ½</p>
            </div>

            <div class="tool-card" onclick="showTool('pomodoro')">
                <div class="tool-icon">ğŸ…</div>
                <h3 class="tool-title">ç•ªèŒ„é’Ÿ</h3>
                <p class="tool-description">æé«˜å·¥ä½œæ•ˆç‡çš„ç•ªèŒ„å·¥ä½œæ³•è®¡æ—¶å™¨</p>
            </div>

            <div class="tool-card" onclick="showTool('timer')">
                <div class="tool-icon">â²ï¸</div>
                <h3 class="tool-title">å€’è®¡æ—¶å™¨</h3>
                <p class="tool-description">è®¾ç½®å€’è®¡æ—¶ï¼Œåˆ°æ—¶æé†’</p>
            </div>

            <div class="tool-card" onclick="showTool('worldClock')">
                <div class="tool-icon">ğŸŒ</div>
                <h3 class="tool-title">ä¸–ç•Œæ—¶é’Ÿ</h3>
                <p class="tool-description">æŸ¥çœ‹å…¨çƒå„åœ°æ—¶åŒºçš„å®æ—¶æ—¶é—´</p>
            </div>

            <div class="tool-card" onclick="showTool('alarm')">
                <div class="tool-icon">â°</div>
                <h3 class="tool-title">é—¹é’Ÿ</h3>
                <p class="tool-description">è®¾ç½®å¤šä¸ªé—¹é’Ÿæé†’</p>
            </div>

            <div class="tool-card" onclick="showTool('timeConverter')">
                <div class="tool-icon">ğŸ”„</div>
                <h3 class="tool-title">æ—¶é—´æˆ³è½¬æ¢</h3>
                <p class="tool-description">Unixæ—¶é—´æˆ³ä¸æ—¥æœŸæ—¶é—´äº’è½¬</p>
            </div>

            <div class="tool-card" onclick="showTool('dateCalculator')">
                <div class="tool-icon">ğŸ“…</div>
                <h3 class="tool-title">æ—¥æœŸè®¡ç®—å™¨</h3>
                <p class="tool-description">è®¡ç®—æ—¥æœŸé—´éš”ï¼Œæ·»åŠ æˆ–å‡å»å¤©æ•°</p>
            </div>

            <div class="tool-card" onclick="showTool('ageCalculator')">
                <div class="tool-icon">ğŸ‚</div>
                <h3 class="tool-title">å¹´é¾„è®¡ç®—å™¨</h3>
                <p class="tool-description">ç²¾ç¡®è®¡ç®—å¹´é¾„ï¼ŒåŒ…æ‹¬å¹´æœˆæ—¥</p>
            </div>

            <div class="tool-card" onclick="showTool('workTracker')">
                <div class="tool-icon">ğŸ’¼</div>
                <h3 class="tool-title">å·¥ä½œæ—¶é—´è¿½è¸ª</h3>
                <p class="tool-description">è®°å½•å’Œç»Ÿè®¡å·¥ä½œæ—¶é—´</p>
            </div>

            <div class="tool-card" onclick="showTool('sunTime')">
                <div class="tool-icon">ğŸŒ…</div>
                <h3 class="tool-title">æ—¥å‡ºæ—¥è½</h3>
                <p class="tool-description">æŸ¥çœ‹ä»»æ„åœ°ç‚¹çš„æ—¥å‡ºæ—¥è½æ—¶é—´</p>
            </div>

            <div class="tool-card" onclick="showTool('countdown')">
                <div class="tool-icon">ğŸ¯</div>
                <h3 class="tool-title">äº‹ä»¶å€’è®¡æ—¶</h3>
                <p class="tool-description">ä¸ºé‡è¦äº‹ä»¶åˆ›å»ºå€’è®¡æ—¶</p>
            </div>

            <div class="tool-card" onclick="showTool('timezone')">
                <div class="tool-icon">ğŸ•</div>
                <h3 class="tool-title">æ—¶åŒºè½¬æ¢</h3>
                <p class="tool-description">ä¸åŒæ—¶åŒºä¹‹é—´çš„æ—¶é—´è½¬æ¢</p>
            </div>
        </div>
    </div>

    <!-- ç§’è¡¨é¡µé¢ -->
    <div id="stopwatchPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>ç§’è¡¨</h2>
        </div>
        <div class="tool-content">
            <div class="stopwatch-display" id="stopwatchDisplay">00:00:00.00</div>
            <div style="text-align: center;">
                <button class="btn" id="startStopBtn" onclick="toggleStopwatch()">å¼€å§‹</button>
                <button class="btn secondary" onclick="lapStopwatch()">è®°å½•</button>
                <button class="btn danger" onclick="resetStopwatch()">é‡ç½®</button>
            </div>
            <div class="lap-times" id="lapTimes"></div>
        </div>
    </div>

    <!-- ç•ªèŒ„é’Ÿé¡µé¢ -->
    <div id="pomodoroPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>ç•ªèŒ„é’Ÿ</h2>
        </div>
        <div class="tool-content">
            <div class="pomodoro-timer">
                <div class="pomodoro-status" id="pomodoroStatus">å‡†å¤‡å¼€å§‹å·¥ä½œ</div>
                <div class="pomodoro-display" id="pomodoroDisplay">25:00</div>
                <div>
                    <button class="btn" id="pomodoroStartBtn" onclick="togglePomodoro()">å¼€å§‹</button>
                    <button class="btn secondary" onclick="resetPomodoro()">é‡ç½®</button>
                </div>
                <div style="margin-top: 2rem;">
                    <label>å·¥ä½œæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ï¼š</label>
                    <input type="number" id="workMinutes" value="25" min="1" max="60" style="width: 100px;">
                    <label style="margin-left: 2rem;">ä¼‘æ¯æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ï¼š</label>
                    <input type="number" id="breakMinutes" value="5" min="1" max="30" style="width: 100px;">
                </div>
            </div>
        </div>
    </div>

    <!-- å€’è®¡æ—¶å™¨é¡µé¢ -->
    <div id="timerPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>å€’è®¡æ—¶å™¨</h2>
        </div>
        <div class="tool-content">
            <div style="text-align: center;">
                <div class="stopwatch-display" id="timerDisplay">00:00:00</div>
                <div style="margin-bottom: 2rem;">
                    <input type="number" id="timerHours" placeholder="å°æ—¶" min="0" max="23" style="width: 100px; display: inline-block;">
                    <input type="number" id="timerMinutes" placeholder="åˆ†é’Ÿ" min="0" max="59" style="width: 100px; display: inline-block;">
                    <input type="number" id="timerSeconds" placeholder="ç§’" min="0" max="59" style="width: 100px; display: inline-block;">
                </div>
                <button class="btn" id="timerStartBtn" onclick="toggleTimer()">å¼€å§‹</button>
                <button class="btn danger" onclick="resetTimer()">é‡ç½®</button>
            </div>
        </div>
    </div>

    <!-- ä¸–ç•Œæ—¶é’Ÿé¡µé¢ -->
    <div id="worldClockPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>ä¸–ç•Œæ—¶é’Ÿ</h2>
        </div>
        <div class="tool-content">
            <div id="worldClockContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <!-- åŠ¨æ€ç”Ÿæˆä¸–ç•Œæ—¶é’Ÿ -->
            </div>
        </div>
    </div>

    <!-- é—¹é’Ÿé¡µé¢ -->
    <div id="alarmPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>é—¹é’Ÿ</h2>
        </div>
        <div class="tool-content">
            <div style="text-align: center;">
                <h3>è®¾ç½®æ–°é—¹é’Ÿ</h3>
                <div style="display: inline-flex; align-items: center; gap: 0.5rem; margin: 1rem 0;">
                    <input type="number" id="alarmHours" placeholder="æ—¶" min="0" max="23" style="width: 80px;">
                    <span style="font-size: 1.5rem;">:</span>
                    <input type="number" id="alarmMinutes" placeholder="åˆ†" min="0" max="59" style="width: 80px;">
                </div>
                <input type="text" id="alarmLabel" placeholder="é—¹é’Ÿæ ‡ç­¾ï¼ˆä¾‹å¦‚ï¼šèµ·åºŠã€å¼€ä¼šï¼‰" style="width: 300px;">
                <div style="margin: 1rem 0;">
                    <label style="display: inline-flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" id="alarmRepeat" style="width: auto; margin: 0;">
                        <span>æ¯å¤©é‡å¤</span>
                    </label>
                </div>
                <button class="btn" onclick="addAlarm()">æ·»åŠ é—¹é’Ÿ</button>
            </div>
            <div id="alarmsList" style="margin-top: 2rem;">
                <!-- é—¹é’Ÿåˆ—è¡¨ -->
            </div>
        </div>
    </div>

    <!-- æ—¶é—´æˆ³è½¬æ¢é¡µé¢ -->
    <div id="timeConverterPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>æ—¶é—´æˆ³è½¬æ¢</h2>
        </div>
        <div class="tool-content">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                    <h3>æ—¶é—´æˆ³è½¬æ—¥æœŸ</h3>
                    <input type="number" id="timestampInput" placeholder="è¾“å…¥Unixæ—¶é—´æˆ³">
                    <button class="btn" onclick="convertTimestamp()">è½¬æ¢</button>
                    <div id="timestampResult" style="margin-top: 1rem; font-size: 1.2rem;"></div>
                </div>
                <div>
                    <h3>æ—¥æœŸè½¬æ—¶é—´æˆ³</h3>
                    <input type="datetime-local" id="datetimeInput">
                    <button class="btn" onclick="convertDatetime()">è½¬æ¢</button>
                    <div id="datetimeResult" style="margin-top: 1rem; font-size: 1.2rem;"></div>
                </div>
            </div>
            <div style="margin-top: 2rem; text-align: center;">
                <button class="btn secondary" onclick="getCurrentTimestamp()">è·å–å½“å‰æ—¶é—´æˆ³</button>
            </div>
        </div>
    </div>

    <!-- æ—¥æœŸè®¡ç®—å™¨é¡µé¢ -->
    <div id="dateCalculatorPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>æ—¥æœŸè®¡ç®—å™¨</h2>
        </div>
        <div class="tool-content">
            <div style="margin-bottom: 2rem;">
                <h3>è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <input type="date" id="date1" placeholder="å¼€å§‹æ—¥æœŸ">
                    <input type="date" id="date2" placeholder="ç»“æŸæ—¥æœŸ">
                </div>
                <button class="btn" onclick="calculateDateDiff()">è®¡ç®—é—´éš”</button>
                <div id="dateDiffResult" style="margin-top: 1rem; font-size: 1.2rem;"></div>
            </div>
            <div>
                <h3>æ—¥æœŸåŠ å‡è®¡ç®—</h3>
                <input type="date" id="baseDate" placeholder="åŸºå‡†æ—¥æœŸ">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                    <input type="number" id="daysToAdd" placeholder="å¤©æ•°ï¼ˆæ­£æ•°åŠ ï¼Œè´Ÿæ•°å‡ï¼‰">
                    <button class="btn" onclick="addDays()">è®¡ç®—</button>
                </div>
                <div id="addDaysResult" style="margin-top: 1rem; font-size: 1.2rem;"></div>
            </div>
        </div>
    </div>

    <!-- å¹´é¾„è®¡ç®—å™¨é¡µé¢ -->
    <div id="ageCalculatorPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>å¹´é¾„è®¡ç®—å™¨</h2>
        </div>
        <div class="tool-content">
            <div style="text-align: center;">
                <h3>è¯·é€‰æ‹©æ‚¨çš„å‡ºç”Ÿæ—¥æœŸ</h3>
                <div style="display: inline-flex; gap: 1rem; align-items: center; margin: 2rem 0;">
                    <select id="birthYear" onchange="updateDays()" style="width: 120px;">
                        <option value="">å¹´ä»½</option>
                    </select>
                    <select id="birthMonth" onchange="updateDays()" style="width: 100px;">
                        <option value="">æœˆä»½</option>
                    </select>
                    <select id="birthDay" style="width: 100px;">
                        <option value="">æ—¥æœŸ</option>
                    </select>
                </div>
                <button class="btn" onclick="calculateAge()" style="font-size: 1.2rem; padding: 1rem 2rem;">è®¡ç®—å¹´é¾„</button>
                <div id="ageResult" style="margin-top: 2rem;"></div>
                <div id="nextBirthday"></div>
            </div>
        </div>
    </div>

    <!-- å·¥ä½œæ—¶é—´è¿½è¸ªé¡µé¢ -->
    <div id="workTrackerPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>å·¥ä½œæ—¶é—´è¿½è¸ª</h2>
        </div>
        <div class="tool-content">
            <div style="text-align: center;">
                <div class="stopwatch-display" id="workTimeDisplay">00:00:00</div>
                <input type="text" id="taskName" placeholder="ä»»åŠ¡åç§°" style="width: 300px; margin-bottom: 1rem;">
                <div>
                    <button class="btn" id="workStartBtn" onclick="toggleWork()">å¼€å§‹å·¥ä½œ</button>
                    <button class="btn success" onclick="saveWorkSession()">ä¿å­˜è®°å½•</button>
                </div>
            </div>
            <div id="workHistory" style="margin-top: 2rem;">
                <h3>å·¥ä½œè®°å½•</h3>
                <div id="workHistoryList"></div>
            </div>
        </div>
    </div>

    <!-- æ—¥å‡ºæ—¥è½é¡µé¢ -->
    <div id="sunTimePage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>æ—¥å‡ºæ—¥è½æ—¶é—´</h2>
        </div>
        <div class="tool-content">
            <div style="text-align: center;">
                <h3>è¾“å…¥ä½ç½®ä¿¡æ¯</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; max-width: 400px; margin: 0 auto;">
                    <input type="number" id="latitude" placeholder="çº¬åº¦" step="0.0001">
                    <input type="number" id="longitude" placeholder="ç»åº¦" step="0.0001">
                </div>
                <button class="btn" onclick="getCurrentLocation()">è·å–å½“å‰ä½ç½®</button>
                <button class="btn secondary" onclick="calculateSunTimes()">è®¡ç®—</button>
                <div id="sunTimesResult" style="margin-top: 2rem; font-size: 1.2rem;"></div>
            </div>
        </div>
    </div>

    <!-- äº‹ä»¶å€’è®¡æ—¶é¡µé¢ -->
    <div id="countdownPage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>äº‹ä»¶å€’è®¡æ—¶</h2>
        </div>
        <div class="tool-content">
            <div style="text-align: center;">
                <h3>åˆ›å»ºæ–°çš„å€’è®¡æ—¶</h3>
                <input type="text" id="eventName" placeholder="äº‹ä»¶åç§°" style="width: 300px;">
                <input type="datetime-local" id="eventDateTime" style="width: 300px;">
                <button class="btn" onclick="createCountdown()">åˆ›å»ºå€’è®¡æ—¶</button>
            </div>
            <div id="countdownsList" style="margin-top: 2rem;">
                <!-- å€’è®¡æ—¶åˆ—è¡¨ -->
            </div>
        </div>
    </div>

    <!-- æ—¶åŒºè½¬æ¢é¡µé¢ -->
    <div id="timezonePage" class="tool-page">
        <div class="tool-header">
            <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
            <h2>æ—¶åŒºè½¬æ¢</h2>
        </div>
        <div class="tool-content">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div style="text-align: center;">
                    <h3 id="timezone1Name">åŒ—äº¬æ—¶é—´</h3>
                    <div class="clock-container">
                        <div class="analog-clock" id="clock1">
                            <div class="clock-hand hour-hand" id="hour1"></div>
                            <div class="clock-hand minute-hand" id="minute1"></div>
                            <div class="clock-hand second-hand" id="second1"></div>
                            <div class="clock-center"></div>
                        </div>
                    </div>
                    <div class="digital-time" id="digitalTime1"></div>
                    <div id="date1" style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;"></div>
                    <select id="timezone1" onchange="updateTimezones()" style="margin-top: 1rem;">
                        <optgroup label="UTC-12 è‡³ UTC-1">
                            <option value="-12">UTC-12 å›½é™…æ—¥æœŸå˜æ›´çº¿è¥¿</option>
                            <option value="-11">UTC-11 ç¾å±è¨æ‘©äºš</option>
                            <option value="-10">UTC-10 å¤å¨å¤·</option>
                            <option value="-9">UTC-9 é˜¿æ‹‰æ–¯åŠ </option>
                            <option value="-8">UTC-8 æ´›æ‰çŸ¶/æ¸©å“¥å</option>
                            <option value="-7">UTC-7 ä¸¹ä½›/å‡¤å‡°åŸ</option>
                            <option value="-6">UTC-6 èŠåŠ å“¥/å¢¨è¥¿å“¥åŸ</option>
                            <option value="-5">UTC-5 çº½çº¦/å¤šä¼¦å¤š</option>
                            <option value="-4">UTC-4 åœ£åœ°äºšå“¥/æ‹‰å·´æ–¯</option>
                            <option value="-3">UTC-3 å¸ƒå®œè¯ºæ–¯è‰¾åˆ©æ–¯</option>
                            <option value="-2">UTC-2 ä¸­å¤§è¥¿æ´‹</option>
                            <option value="-1">UTC-1 äºšé€Ÿå°”ç¾¤å²›</option>
                        </optgroup>
                        <optgroup label="UTC+0 è‡³ UTC+12">
                            <option value="0">UTC+0 ä¼¦æ•¦/éƒ½æŸæ—</option>
                            <option value="1">UTC+1 å·´é»/æŸæ—/ç½—é©¬</option>
                            <option value="2">UTC+2 å¼€ç½—/é›…å…¸/è€¶è·¯æ’’å†·</option>
                            <option value="3">UTC+3 è«æ–¯ç§‘/ä¼Šæ–¯å¦å¸ƒå°”</option>
                            <option value="4">UTC+4 è¿ªæ‹œ/å·´åº“</option>
                            <option value="5">UTC+5 å¡æ‹‰å¥‡/å¡”ä»€å¹²</option>
                            <option value="5.5">UTC+5:30 æ–°å¾·é‡Œ/å­Ÿä¹°</option>
                            <option value="6">UTC+6 è¾¾å¡/é˜¿æ‹‰æœ¨å›¾</option>
                            <option value="7">UTC+7 æ›¼è°·/é›…åŠ è¾¾</option>
                            <option value="8" selected>UTC+8 åŒ—äº¬/é¦™æ¸¯/æ–°åŠ å¡</option>
                            <option value="9">UTC+9 ä¸œäº¬/é¦–å°”</option>
                            <option value="10">UTC+10 æ‚‰å°¼/å¢¨å°”æœ¬</option>
                            <option value="11">UTC+11 æ‰€ç½—é—¨ç¾¤å²›</option>
                            <option value="12">UTC+12 å¥¥å…‹å…°/æ–æµ</option>
                        </optgroup>
                    </select>
                </div>
                <div style="text-align: center;">
                    <h3 id="timezone2Name">çº½çº¦æ—¶é—´</h3>
                    <div class="clock-container">
                        <div class="analog-clock" id="clock2">
                            <div class="clock-hand hour-hand" id="hour2"></div>
                            <div class="clock-hand minute-hand" id="minute2"></div>
                            <div class="clock-hand second-hand" id="second2"></div>
                            <div class="clock-center"></div>
                        </div>
                    </div>
                    <div class="digital-time" id="digitalTime2"></div>
                    <div id="date2" style="color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;"></div>
                    <select id="timezone2" onchange="updateTimezones()" style="margin-top: 1rem;">
                        <optgroup label="UTC-12 è‡³ UTC-1">
                            <option value="-12">UTC-12 å›½é™…æ—¥æœŸå˜æ›´çº¿è¥¿</option>
                            <option value="-11">UTC-11 ç¾å±è¨æ‘©äºš</option>
                            <option value="-10">UTC-10 å¤å¨å¤·</option>
                            <option value="-9">UTC-9 é˜¿æ‹‰æ–¯åŠ </option>
                            <option value="-8">UTC-8 æ´›æ‰çŸ¶/æ¸©å“¥å</option>
                            <option value="-7">UTC-7 ä¸¹ä½›/å‡¤å‡°åŸ</option>
                            <option value="-6">UTC-6 èŠåŠ å“¥/å¢¨è¥¿å“¥åŸ</option>
                            <option value="-5" selected>UTC-5 çº½çº¦/å¤šä¼¦å¤š</option>
                            <option value="-4">UTC-4 åœ£åœ°äºšå“¥/æ‹‰å·´æ–¯</option>
                            <option value="-3">UTC-3 å¸ƒå®œè¯ºæ–¯è‰¾åˆ©æ–¯</option>
                            <option value="-2">UTC-2 ä¸­å¤§è¥¿æ´‹</option>
                            <option value="-1">UTC-1 äºšé€Ÿå°”ç¾¤å²›</option>
                        </optgroup>
                        <optgroup label="UTC+0 è‡³ UTC+12">
                            <option value="0">UTC+0 ä¼¦æ•¦/éƒ½æŸæ—</option>
                            <option value="1">UTC+1 å·´é»/æŸæ—/ç½—é©¬</option>
                            <option value="2">UTC+2 å¼€ç½—/é›…å…¸/è€¶è·¯æ’’å†·</option>
                            <option value="3">UTC+3 è«æ–¯ç§‘/ä¼Šæ–¯å¦å¸ƒå°”</option>
                            <option value="4">UTC+4 è¿ªæ‹œ/å·´åº“</option>
                            <option value="5">UTC+5 å¡æ‹‰å¥‡/å¡”ä»€å¹²</option>
                            <option value="5.5">UTC+5:30 æ–°å¾·é‡Œ/å­Ÿä¹°</option>
                            <option value="6">UTC+6 è¾¾å¡/é˜¿æ‹‰æœ¨å›¾</option>
                            <option value="7">UTC+7 æ›¼è°·/é›…åŠ è¾¾</option>
                            <option value="8">UTC+8 åŒ—äº¬/é¦™æ¸¯/æ–°åŠ å¡</option>
                            <option value="9">UTC+9 ä¸œäº¬/é¦–å°”</option>
                            <option value="10">UTC+10 æ‚‰å°¼/å¢¨å°”æœ¬</option>
                            <option value="11">UTC+11 æ‰€ç½—é—¨ç¾¤å²›</option>
                            <option value="12">UTC+12 å¥¥å…‹å…°/æ–æµ</option>
                        </optgroup>
                    </select>
                </div>
            </div>
            <div style="margin-top: 2rem; padding: 1rem; background: var(--bg-color); border-radius: 0.5rem; text-align: center;">
                <p style="color: var(--text-secondary);">
                    æ—¶å·®ï¼š<span style="color: var(--accent-color); font-size: 1.2rem;" id="timeDifference"></span> å°æ—¶
                </p>
            </div>
        </div>
    </div>

    <script>
                // å…¨å±€å˜é‡
        let currentPage = 'home';
        let stopwatchInterval = null;
        let stopwatchTime = 0;
        let pomodoroInterval = null;
        let pomodoroTime = 25 * 60;
        let isWorking = true;
        let timerInterval = null;
        let timerTime = 0;
        let workInterval = null;
        let workTime = 0;
        let worldClockInterval = null;
        let timezoneInterval = null;
        let countdownInterval = null;
        let alarms = [];
        let countdowns = [];
        let workSessions = [];

        // æ¸…ç†æ‰€æœ‰å®šæ—¶å™¨
        function clearAllIntervals() {
            if (stopwatchInterval) {
                clearInterval(stopwatchInterval);
                stopwatchInterval = null;
            }
            if (pomodoroInterval) {
                clearInterval(pomodoroInterval);
                pomodoroInterval = null;
            }
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            if (workInterval) {
                clearInterval(workInterval);
                workInterval = null;
            }
            if (worldClockInterval) {
                clearInterval(worldClockInterval);
                worldClockInterval = null;
            }
            if (timezoneInterval) {
                clearInterval(timezoneInterval);
                timezoneInterval = null;
            }
            if (countdownInterval) {
                clearInterval(countdownInterval);
                countdownInterval = null;
            }
        }
        
        // é¡µé¢åˆ‡æ¢
        function showHome() {
            clearAllIntervals();
            document.getElementById('homePage').style.display = 'block';
            document.querySelectorAll('.tool-page').forEach(page => {
                page.style.display = 'none';
            });
            currentPage = 'home';
        }

        function showTool(toolName) {
            clearAllIntervals(); // æ¸…ç†æ‰€æœ‰å®šæ—¶å™¨
            
            document.getElementById('homePage').style.display = 'none';
            document.querySelectorAll('.tool-page').forEach(page => {
                page.style.display = 'none';
            });
            
            const targetPage = document.getElementById(toolName + 'Page');
            if (targetPage) {
                targetPage.style.display = 'block';
                targetPage.classList.add('fade-in');
            }
            
            currentPage = toolName;

            // ç‰¹å®šå·¥å…·åˆå§‹åŒ–
            switch(toolName) {
                case 'worldClock':
                    initWorldClock();
                    break;
                    case 'timezone':
                    // ç¡®ä¿é€‰æ‹©å™¨æœ‰é»˜è®¤å€¼
                    setTimeout(() => {
                        const tz1 = document.getElementById('timezone1');
                        const tz2 = document.getElementById('timezone2');
                        if (tz1 && !tz1.value) tz1.value = "8";
                        if (tz2 && !tz2.value) tz2.value = "-5";
                        
                        // æ›´æ–°æ—¶åŒºåç§°å’Œæ—¶å·®
                        updateTimezones();
                        
                        // å¯åŠ¨æ—¶é’Ÿ
                        startTimezoneClock();
                    }, 100);
                    break;
                case 'countdown':
                    startCountdownUpdates();
                    updateCountdownsList();
                    break;
                case 'ageCalculator':
                    initAgeCalculator();
                    break;
            }
        }
        
        function initAgeCalculator() {
            const yearSelect = document.getElementById('birthYear');
            const monthSelect = document.getElementById('birthMonth');
            const daySelect = document.getElementById('birthDay');
            
            if (!yearSelect || !monthSelect || !daySelect) {
                return;
            }
            
            // åˆå§‹åŒ–å¹´ä»½ï¼ˆå¦‚æœè¿˜æ²¡æœ‰é€‰é¡¹ï¼‰
            if (yearSelect.options.length <= 1) {
                const currentYear = new Date().getFullYear();
                for (let i = 0; i < 120; i++) {
                    const year = currentYear - i;
                    const option = document.createElement('option');
                    option.value = year;
                    option.textContent = year + 'å¹´';
                    yearSelect.appendChild(option);
                }
            }
            
            // åˆå§‹åŒ–æœˆä»½ï¼ˆå¦‚æœè¿˜æ²¡æœ‰é€‰é¡¹ï¼‰
            if (monthSelect.options.length <= 1) {
                for (let i = 1; i <= 12; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + 'æœˆ';
                    monthSelect.appendChild(option);
                }
            }
            
            // åˆå§‹åŒ–æ—¥æœŸï¼ˆå¦‚æœè¿˜æ²¡æœ‰é€‰é¡¹ï¼‰
            if (daySelect.options.length <= 1) {
                for (let i = 1; i <= 31; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + 'æ—¥';
                    daySelect.appendChild(option);
                }
            }
        }
        
        function updateTimeDifference() {
            const timezone1Element = document.getElementById('timezone1');
            const timezone2Element = document.getElementById('timezone2');
            const timeDifferenceElement = document.getElementById('timeDifference');
            
            if (!timezone1Element || !timezone2Element || !timeDifferenceElement) return;
            
            const tz1 = parseFloat(timezone1Element.value) || 8;
            const tz2 = parseFloat(timezone2Element.value) || -5;
            const diff = Math.abs(tz1 - tz2);
            timeDifferenceElement.textContent = diff;
        }

        // ç§’è¡¨åŠŸèƒ½
        function toggleStopwatch() {
            const btn = document.getElementById('startStopBtn');
            if (stopwatchInterval) {
                clearInterval(stopwatchInterval);
                stopwatchInterval = null;
                btn.textContent = 'ç»§ç»­';
                btn.classList.remove('success');
            } else {
                stopwatchInterval = setInterval(updateStopwatch, 10);
                btn.textContent = 'æš‚åœ';
                btn.classList.add('success');
            }
        }

        function updateStopwatch() {
            stopwatchTime += 10;
            const display = document.getElementById('stopwatchDisplay');
            display.textContent = formatStopwatchTime(stopwatchTime);
        }

        function formatStopwatchTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            const milliseconds = Math.floor((ms % 1000) / 10);
            
            return `${String(Math.floor(minutes / 60)).padStart(2, '0')}:${String(minutes % 60).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(milliseconds).padStart(2, '0')}`;
        }

        function lapStopwatch() {
            if (stopwatchTime > 0) {
                const lapTimes = document.getElementById('lapTimes');
                const lapCount = lapTimes.children.length + 1;
                const lapItem = document.createElement('div');
                lapItem.className = 'lap-item';
                lapItem.innerHTML = `
                    <span>è®°å½• ${lapCount}</span>
                    <span>${formatStopwatchTime(stopwatchTime)}</span>
                `;
                lapTimes.insertBefore(lapItem, lapTimes.firstChild);
            }
        }

        function resetStopwatch() {
            clearInterval(stopwatchInterval);
            stopwatchInterval = null;
            stopwatchTime = 0;
            document.getElementById('stopwatchDisplay').textContent = '00:00:00.00';
            document.getElementById('lapTimes').innerHTML = '';
            document.getElementById('startStopBtn').textContent = 'å¼€å§‹';
            document.getElementById('startStopBtn').classList.remove('success');
        }

        // ç•ªèŒ„é’ŸåŠŸèƒ½
        function togglePomodoro() {
            const btn = document.getElementById('pomodoroStartBtn');
            if (pomodoroInterval) {
                clearInterval(pomodoroInterval);
                pomodoroInterval = null;
                btn.textContent = 'ç»§ç»­';
            } else {
                pomodoroInterval = setInterval(updatePomodoro, 1000);
                btn.textContent = 'æš‚åœ';
            }
        }

        function updatePomodoro() {
            pomodoroTime--;
            const display = document.getElementById('pomodoroDisplay');
            const minutes = Math.floor(pomodoroTime / 60);
            const seconds = pomodoroTime % 60;
            display.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            if (pomodoroTime <= 0) {
                clearInterval(pomodoroInterval);
                pomodoroInterval = null;
                
                if (isWorking) {
                    isWorking = false;
                    pomodoroTime = parseInt(document.getElementById('breakMinutes').value) * 60;
                    document.getElementById('pomodoroStatus').textContent = 'ä¼‘æ¯æ—¶é—´ï¼';
                    alert('å·¥ä½œæ—¶é—´ç»“æŸï¼å¼€å§‹ä¼‘æ¯å§ï¼');
                } else {
                    isWorking = true;
                    pomodoroTime = parseInt(document.getElementById('workMinutes').value) * 60;
                    document.getElementById('pomodoroStatus').textContent = 'å·¥ä½œæ—¶é—´ï¼';
                    alert('ä¼‘æ¯ç»“æŸï¼ç»§ç»­å·¥ä½œå§ï¼');
                }
                
                updatePomodoro();
                document.getElementById('pomodoroStartBtn').textContent = 'å¼€å§‹';
            }
        }

        function resetPomodoro() {
            clearInterval(pomodoroInterval);
            pomodoroInterval = null;
            isWorking = true;
            pomodoroTime = parseInt(document.getElementById('workMinutes').value) * 60;
            document.getElementById('pomodoroStatus').textContent = 'å‡†å¤‡å¼€å§‹å·¥ä½œ';
            updatePomodoro();
            document.getElementById('pomodoroStartBtn').textContent = 'å¼€å§‹';
        }

        // å€’è®¡æ—¶å™¨åŠŸèƒ½
        function toggleTimer() {
            const btn = document.getElementById('timerStartBtn');
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
                btn.textContent = 'ç»§ç»­';
            } else {
                if (timerTime === 0) {
                    const hours = parseInt(document.getElementById('timerHours').value) || 0;
                    const minutes = parseInt(document.getElementById('timerMinutes').value) || 0;
                    const seconds = parseInt(document.getElementById('timerSeconds').value) || 0;
                    timerTime = hours * 3600 + minutes * 60 + seconds;
                }
                
                if (timerTime > 0) {
                    timerInterval = setInterval(updateTimer, 1000);
                    btn.textContent = 'æš‚åœ';
                }
            }
        }

        function updateTimer() {
            timerTime--;
            const display = document.getElementById('timerDisplay');
            const hours = Math.floor(timerTime / 3600);
            const minutes = Math.floor((timerTime % 3600) / 60);
            const seconds = timerTime % 60;
            
            display.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            if (timerTime <= 0) {
                clearInterval(timerInterval);
                timerInterval = null;
                alert('å€’è®¡æ—¶ç»“æŸï¼');
                document.getElementById('timerStartBtn').textContent = 'å¼€å§‹';
            }
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            timerTime = 0;
            document.getElementById('timerDisplay').textContent = '00:00:00';
            document.getElementById('timerHours').value = '';
            document.getElementById('timerMinutes').value = '';
            document.getElementById('timerSeconds').value = '';
            document.getElementById('timerStartBtn').textContent = 'å¼€å§‹';
        }

        // ä¸–ç•Œæ—¶é’ŸåŠŸèƒ½
        function initWorldClock() {
            const cities = [
                { name: 'åŒ—äº¬', timezone: 'Asia/Shanghai', offset: 8 },
                { name: 'ä¸œäº¬', timezone: 'Asia/Tokyo', offset: 9 },
                { name: 'çº½çº¦', timezone: 'America/New_York', offset: -5 },
                { name: 'ä¼¦æ•¦', timezone: 'Europe/London', offset: 0 },
                { name: 'å·´é»', timezone: 'Europe/Paris', offset: 1 },
                { name: 'æ‚‰å°¼', timezone: 'Australia/Sydney', offset: 11 }
            ];

            const container = document.getElementById('worldClockContainer');
            container.innerHTML = '';

            cities.forEach(city => {
                const clockDiv = document.createElement('div');
                clockDiv.style.textAlign = 'center';
                clockDiv.style.padding = '1rem';
                clockDiv.style.background = 'var(--bg-color)';
                clockDiv.style.borderRadius = '0.5rem';
                
                const now = new Date();
                const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                const cityTime = new Date(utc + (3600000 * city.offset));
                
                clockDiv.innerHTML = `
                    <h3>${city.name}</h3>
                    <div class="digital-time">${cityTime.toLocaleTimeString()}</div>
                    <div style="color: var(--text-secondary);">${cityTime.toLocaleDateString()}</div>
                `;
                
                container.appendChild(clockDiv);
            });

            // æ¯ç§’æ›´æ–°
            setInterval(() => {
                if (currentPage === 'worldClock') {
                    initWorldClock();
                }
            }, 1000);
        }

        // é—¹é’ŸåŠŸèƒ½
        function addAlarm() {
            const time = document.getElementById('alarmTime').value;
            const label = document.getElementById('alarmLabel').value || 'é—¹é’Ÿ';
            
            if (time) {
                const alarm = {
                    id: Date.now(),
                    time: time,
                    label: label,
                    active: true
                };
                
                alarms.push(alarm);
                updateAlarmsList();
                
                document.getElementById('alarmTime').value = '';
                document.getElementById('alarmLabel').value = '';
            }
        }

        function updateAlarmsList() {
            const list = document.getElementById('alarmsList');
            list.innerHTML = '<h3>å·²è®¾ç½®çš„é—¹é’Ÿ</h3>';
            
            alarms.forEach(alarm => {
                const alarmDiv = document.createElement('div');
                alarmDiv.style.display = 'flex';
                alarmDiv.style.justifyContent = 'space-between';
                alarmDiv.style.alignItems = 'center';
                alarmDiv.style.padding = '1rem';
                alarmDiv.style.marginBottom = '0.5rem';
                alarmDiv.style.background = 'var(--bg-color)';
                alarmDiv.style.borderRadius = '0.5rem';
                
                alarmDiv.innerHTML = `
                    <div>
                        <div style="font-size: 1.5rem;">${alarm.time}</div>
                        <div style="color: var(--text-secondary);">${alarm.label}</div>
                    </div>
                    <button class="btn danger" onclick="removeAlarm(${alarm.id})">åˆ é™¤</button>
                `;
                
                list.appendChild(alarmDiv);
            });
        }

        function removeAlarm(id) {
            alarms = alarms.filter(alarm => alarm.id !== id);
            updateAlarmsList();
        }

        // æ£€æŸ¥é—¹é’Ÿ
        setInterval(() => {
            const now = new Date();
            const currentTime = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            alarms.forEach(alarm => {
                if (alarm.active && alarm.time === currentTime) {
                    alert(`é—¹é’Ÿå“äº†ï¼š${alarm.label}`);
                    alarm.active = false;
                    setTimeout(() => {
                        alarm.active = true;
                    }, 60000);
                }
            });
        }, 1000);

        // æ—¶é—´æˆ³è½¬æ¢åŠŸèƒ½
        function convertTimestamp() {
            const timestamp = parseInt(document.getElementById('timestampInput').value);
            if (timestamp) {
                const date = new Date(timestamp * 1000);
                document.getElementById('timestampResult').textContent = date.toLocaleString();
            }
        }

        function convertDatetime() {
            const datetime = document.getElementById('datetimeInput').value;
            if (datetime) {
                const timestamp = Math.floor(new Date(datetime).getTime() / 1000);
                document.getElementById('datetimeResult').textContent = `æ—¶é—´æˆ³ï¼š${timestamp}`;
            }
        }

        function getCurrentTimestamp() {
            const timestamp = Math.floor(Date.now() / 1000);
            document.getElementById('timestampInput').value = timestamp;
            convertTimestamp();
        }

        // æ—¥æœŸè®¡ç®—å™¨åŠŸèƒ½
        function calculateDateDiff() {
            const date1 = new Date(document.getElementById('date1').value);
            const date2 = new Date(document.getElementById('date2').value);
            
            if (date1 && date2) {
                const diffTime = Math.abs(date2 - date1);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const diffWeeks = Math.floor(diffDays / 7);
                const diffMonths = Math.floor(diffDays / 30.44);
                const diffYears = Math.floor(diffDays / 365.25);
                
                document.getElementById('dateDiffResult').innerHTML = `
                    <div>ç›¸å·®ï¼š${diffDays} å¤©</div>
                    <div>çº¦ ${diffWeeks} å‘¨</div>
                    <div>çº¦ ${diffMonths} æœˆ</div>
                    <div>çº¦ ${diffYears} å¹´</div>
                `;
            }
        }

        function addDays() {
            const baseDate = new Date(document.getElementById('baseDate').value);
            const daysToAdd = parseInt(document.getElementById('daysToAdd').value);
            
            if (baseDate && daysToAdd) {
                const resultDate = new Date(baseDate);
                resultDate.setDate(resultDate.getDate() + daysToAdd);
                
                document.getElementById('addDaysResult').textContent = 
                    `ç»“æœæ—¥æœŸï¼š${resultDate.toLocaleDateString()} (${resultDate.toLocaleDateString('zh-CN', { weekday: 'long' })})`;
            }
        }
                // æ›´æ–°æ—¥æœŸé€‰é¡¹ï¼ˆæ ¹æ®å¹´ä»½å’Œæœˆä»½ï¼‰
        function updateDays() {
            const yearSelect = document.getElementById('birthYear');
            const monthSelect = document.getElementById('birthMonth');
            const daySelect = document.getElementById('birthDay');
            
            if (!yearSelect || !monthSelect || !daySelect) return;
            
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);
            
            if (year && month) {
                // æ¸…ç©ºç°æœ‰é€‰é¡¹
                daySelect.innerHTML = '<option value="">æ—¥æœŸ</option>';
                
                // è®¡ç®—è¯¥æœˆçš„å¤©æ•°
                const daysInMonth = new Date(year, month, 0).getDate();
                
                // æ·»åŠ æ—¥æœŸé€‰é¡¹
                for (let i = 1; i <= daysInMonth; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + 'æ—¥';
                    daySelect.appendChild(option);
                }
            }
        }
        // å¹´é¾„è®¡ç®—å™¨åŠŸèƒ½
        function calculateAge() {
            const year = parseInt(document.getElementById('birthYear').value);
            const month = parseInt(document.getElementById('birthMonth').value);
            const day = parseInt(document.getElementById('birthDay').value);
            
            if (year && month && day) {
                const birthDate = new Date(year, month - 1, day); // æœˆä»½ä»0å¼€å§‹
                const today = new Date();
                
                let age = today.getFullYear() - birthDate.getFullYear();
                const monthDiff = today.getMonth() - birthDate.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                
                // è®¡ç®—ç²¾ç¡®çš„å¹´æœˆæ—¥
                let years = age;
                let months = monthDiff >= 0 ? monthDiff : 12 + monthDiff;
                let days = today.getDate() - birthDate.getDate();
                
                if (days < 0) {
                    months--;
                    const lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                    days = lastMonth.getDate() + days;
                }
                
                if (months < 0) {
                    years--;
                    months = 12 + months;
                }
                
                // è®¡ç®—æ€»å¤©æ•°
                const totalDays = Math.floor((today - birthDate) / (1000 * 60 * 60 * 24));
                
                document.getElementById('ageResult').innerHTML = `
                    <div style="font-size: 1.5rem; color: var(--accent-color); margin-bottom: 1rem;">
                        ${years} å² ${months} ä¸ªæœˆ ${days} å¤©
                    </div>
                    <div>å·²ç»æ´»äº† ${totalDays} å¤©</div>
                `;
                
                // è®¡ç®—ä¸‹æ¬¡ç”Ÿæ—¥
                const nextBirthday = new Date(today.getFullYear(), birthDate.getMonth(), birthDate.getDate());
                if (nextBirthday < today) {
                    nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
                }
                const daysToNextBirthday = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));
                
                document.getElementById('nextBirthday').innerHTML = `
                    <div style="margin-top: 1rem; color: var(--text-secondary);">
                        è·ç¦»ä¸‹æ¬¡ç”Ÿæ—¥è¿˜æœ‰ ${daysToNextBirthday} å¤©
                    </div>
                `;
            } else {
                alert('è¯·é€‰æ‹©å®Œæ•´çš„å‡ºç”Ÿæ—¥æœŸ');
            }
        }

        // å·¥ä½œæ—¶é—´è¿½è¸ªåŠŸèƒ½
        function toggleWork() {
            const btn = document.getElementById('workStartBtn');
            if (workInterval) {
                clearInterval(workInterval);
                workInterval = null;
                btn.textContent = 'å¼€å§‹å·¥ä½œ';
            } else {
                workInterval = setInterval(updateWorkTime, 1000);
                btn.textContent = 'åœæ­¢å·¥ä½œ';
            }
        }

        function updateWorkTime() {
            workTime++;
            const display = document.getElementById('workTimeDisplay');
            const hours = Math.floor(workTime / 3600);
            const minutes = Math.floor((workTime % 3600) / 60);
            const seconds = workTime % 60;
            
            display.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function saveWorkSession() {
            if (workTime > 0) {
                const taskName = document.getElementById('taskName').value || 'æœªå‘½åä»»åŠ¡';
                const session = {
                    id: Date.now(),
                    task: taskName,
                    duration: workTime,
                    date: new Date().toLocaleString()
                };
                
                workSessions.push(session);
                updateWorkHistory();
                
                // é‡ç½®
                clearInterval(workInterval);
                workInterval = null;
                workTime = 0;
                document.getElementById('workTimeDisplay').textContent = '00:00:00';
                document.getElementById('taskName').value = '';
                document.getElementById('workStartBtn').textContent = 'å¼€å§‹å·¥ä½œ';
            }
        }

        function updateWorkHistory() {
            const list = document.getElementById('workHistoryList');
            list.innerHTML = '';
            
            workSessions.reverse().forEach(session => {
                const hours = Math.floor(session.duration / 3600);
                const minutes = Math.floor((session.duration % 3600) / 60);
                
                const sessionDiv = document.createElement('div');
                sessionDiv.style.padding = '1rem';
                sessionDiv.style.marginBottom = '0.5rem';
                sessionDiv.style.background = 'var(--bg-color)';
                sessionDiv.style.borderRadius = '0.5rem';
                
                sessionDiv.innerHTML = `
                    <div style="font-weight: bold;">${session.task}</div>
                    <div>æ—¶é•¿ï¼š${hours} å°æ—¶ ${minutes} åˆ†é’Ÿ</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">${session.date}</div>
                `;
                
                list.appendChild(sessionDiv);
            });
        }

        // æ—¥å‡ºæ—¥è½åŠŸèƒ½
        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    position => {
                        document.getElementById('latitude').value = position.coords.latitude.toFixed(4);
                        document.getElementById('longitude').value = position.coords.longitude.toFixed(4);
                        calculateSunTimes();
                    },
                    error => {
                        alert('æ— æ³•è·å–ä½ç½®ä¿¡æ¯');
                    }
                );
            } else {
                alert('æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†ä½ç½®');
            }
        }

        function calculateSunTimes() {
            const lat = parseFloat(document.getElementById('latitude').value);
            const lon = parseFloat(document.getElementById('longitude').value);
            
            if (lat && lon) {
                // ç®€åŒ–çš„æ—¥å‡ºæ—¥è½è®¡ç®—ï¼ˆå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨æ›´ç²¾ç¡®çš„ç®—æ³•ï¼‰
                const date = new Date();
                const julianDay = Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 86400000);
                
                // è¿™é‡Œä½¿ç”¨ç®€åŒ–çš„å…¬å¼ï¼Œå®é™…åº”ç”¨åº”è¯¥ä½¿ç”¨æ›´ç²¾ç¡®çš„å¤©æ–‡ç®—æ³•
                const sunrise = new Date();
                sunrise.setHours(6, 0, 0); // ç®€åŒ–ä¸º6:00
                
                const sunset = new Date();
                sunset.setHours(18, 0, 0); // ç®€åŒ–ä¸º18:00
                
                document.getElementById('sunTimesResult').innerHTML = `
                    <div>ä½ç½®ï¼š${lat.toFixed(4)}Â°, ${lon.toFixed(4)}Â°</div>
                    <div>æ—¥å‡ºæ—¶é—´ï¼šçº¦ ${sunrise.toLocaleTimeString()}</div>
                    <div>æ—¥è½æ—¶é—´ï¼šçº¦ ${sunset.toLocaleTimeString()}</div>
                    <div style="color: var(--text-secondary); margin-top: 1rem;">
                        æ³¨ï¼šè¿™æ˜¯ç®€åŒ–è®¡ç®—ï¼Œå®é™…æ—¶é—´å¯èƒ½æœ‰æ‰€ä¸åŒ
                    </div>
                `;
            }
        }

        // äº‹ä»¶å€’è®¡æ—¶åŠŸèƒ½
        function createCountdown() {
            const eventName = document.getElementById('eventName').value;
            const eventDateTime = document.getElementById('eventDateTime').value;
            
            if (eventName && eventDateTime) {
                const countdown = {
                    id: Date.now(),
                    name: eventName,
                    targetDate: new Date(eventDateTime)
                };
                
                countdowns.push(countdown);
                updateCountdownsList();
                
                document.getElementById('eventName').value = '';
                document.getElementById('eventDateTime').value = '';
            }
        }

        function updateCountdownsList() {
            const list = document.getElementById('countdownsList');
            list.innerHTML = '<h3>å€’è®¡æ—¶åˆ—è¡¨</h3>';
            
            countdowns.forEach(countdown => {
                const now = new Date();
                const diff = countdown.targetDate - now;
                
                if (diff > 0) {
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    
                    const countdownDiv = document.createElement('div');
                    countdownDiv.style.padding = '1.5rem';
                    countdownDiv.style.marginBottom = '1rem';
                    countdownDiv.style.background = 'var(--bg-color)';
                    countdownDiv.style.borderRadius = '0.5rem';
                    countdownDiv.style.textAlign = 'center';
                    
                    countdownDiv.innerHTML = `
                        <h4 style="margin-bottom: 1rem;">${countdown.name}</h4>
                        <div style="font-size: 2rem; color: var(--accent-color);">
                            ${days} å¤© ${hours} å°æ—¶ ${minutes} åˆ†é’Ÿ
                        </div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem;">
                            ç›®æ ‡æ—¶é—´ï¼š${countdown.targetDate.toLocaleString()}
                        </div>
                        <button class="btn danger" style="margin-top: 1rem;" onclick="removeCountdown(${countdown.id})">åˆ é™¤</button>
                    `;
                    
                    list.appendChild(countdownDiv);
                }
            });
        }

        function removeCountdown(id) {
            countdowns = countdowns.filter(c => c.id !== id);
            updateCountdownsList();
        }

        // æ¯ç§’æ›´æ–°å€’è®¡æ—¶
        setInterval(() => {
            if (currentPage === 'countdown') {
                updateCountdownsList();
            }
        }, 1000);

        function updateTimezones() {
            const timezone1Select = document.getElementById('timezone1');
            const timezone2Select = document.getElementById('timezone2');
            
            if (!timezone1Select || !timezone2Select) return;
            
            const timezone1Name = document.getElementById('timezone1Name');
            const timezone2Name = document.getElementById('timezone2Name');
            
            // æ›´æ–°æ—¶åŒºåç§°æ˜¾ç¤º
            if (timezone1Name && timezone1Select.selectedIndex >= 0) {
                const selectedText = timezone1Select.options[timezone1Select.selectedIndex].text;
                timezone1Name.textContent = selectedText.split(' ')[1] || selectedText; // åªæ˜¾ç¤ºåŸå¸‚åç§°éƒ¨åˆ†
            }
            if (timezone2Name && timezone2Select.selectedIndex >= 0) {
                const selectedText = timezone2Select.options[timezone2Select.selectedIndex].text;
                timezone2Name.textContent = selectedText.split(' ')[1] || selectedText; // åªæ˜¾ç¤ºåŸå¸‚åç§°éƒ¨åˆ†
            }
            
            // ç«‹å³æ›´æ–°æ—¶é’Ÿæ˜¾ç¤º
            updateClocks();
            
            // æ›´æ–°æ—¶å·®
            updateTimeDifference();
        }

        function startTimezoneClock() {
            // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„æ—§å®šæ—¶å™¨
            if (timezoneInterval) {
                clearInterval(timezoneInterval);
            }
            
            // ç«‹å³æ›´æ–°ä¸€æ¬¡
            updateClocks();
            
            // æ¯ç§’æ›´æ–°ä¸€æ¬¡
            timezoneInterval = setInterval(() => {
                if (currentPage === 'timezone') {
                    updateClocks();
                }
            }, 1000);
        }

        function updateClocks() {
            if (currentPage !== 'timezone') return;
            
            const now = new Date();
            
            const timezone1Element = document.getElementById('timezone1');
            const timezone2Element = document.getElementById('timezone2');
            
            if (!timezone1Element || !timezone2Element) return;
            
            // æ›´æ–°æ—¶é’Ÿ1
            const time1 = getTimeForTimezone(now, timezone1Element.value);
            updateClock('1', time1);
            
            // æ›´æ–°æ—¶é’Ÿ2
            const time2 = getTimeForTimezone(now, timezone2Element.value);
            updateClock('2', time2);
        }
        function getTimeForTimezone(date, timezoneOffset) {
            // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—
            const offset = parseFloat(timezoneOffset) || 8;
            
            // è·å–UTCæ—¶é—´
            const utc = date.getTime() + (date.getTimezoneOffset() * 60000);
            
            // è®¡ç®—ç›®æ ‡æ—¶åŒºçš„æ—¶é—´
            const targetTime = new Date(utc + (offset * 3600000));
            
            return targetTime;
        }

        function updateClock(clockId, time) {
    if (!time || isNaN(time.getTime())) return;
    
    const hours = time.getHours();
    const minutes = time.getMinutes();
    const seconds = time.getSeconds();
    
    // æ›´æ–°æ¨¡æ‹Ÿæ—¶é’ŸæŒ‡é’ˆ
    const hourDeg = (hours % 12) * 30 + minutes * 0.5;
    const minuteDeg = minutes * 6;
    const secondDeg = seconds * 6;
    
    const hourHand = document.getElementById(`hour${clockId}`);
    const minuteHand = document.getElementById(`minute${clockId}`);
    const secondHand = document.getElementById(`second${clockId}`);
    
    if (hourHand) hourHand.style.transform = `rotate(${hourDeg}deg)`;
    if (minuteHand) minuteHand.style.transform = `rotate(${minuteDeg}deg)`;
    if (secondHand) secondHand.style.transform = `rotate(${secondDeg}deg)`;
    
            // æ›´æ–°æ•°å­—æ—¶é’Ÿ
            const digitalTime = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            const digitalTimeElement = document.getElementById(`digitalTime${clockId}`);
            if (digitalTimeElement) {
                digitalTimeElement.textContent = digitalTime;
            }
            
            // æ›´æ–°æ—¥æœŸ
            const dateElement = document.getElementById(`date${clockId}`);
            if (dateElement) {
                const dateStr = time.toLocaleDateString('zh-CN', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    weekday: 'long'
                });
                dateElement.textContent = dateStr;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            // æ˜¾ç¤ºä¸»é¡µ
            showHome();
            
            // ç¡®ä¿selectå…ƒç´ çš„é»˜è®¤å€¼è¢«æ­£ç¡®è¯†åˆ«
            const selects = document.querySelectorAll('select');
            selects.forEach(select => {
                const selectedOption = select.querySelector('option[selected]');
                if (selectedOption && !select.value) {
                    select.value = selectedOption.value;
                }
            });
        });
        
        function initAgeCalculatorOptions() {
            setTimeout(() => {
                const yearSelect = document.getElementById('birthYear');
                const monthSelect = document.getElementById('birthMonth');
                const daySelect = document.getElementById('birthDay');
                
                if (!yearSelect || !monthSelect || !daySelect) return;
                
                // åˆå§‹åŒ–å¹´ä»½
                if (yearSelect.options.length <= 1) {
                    const currentYear = new Date().getFullYear();
                    for (let i = 0; i < 120; i++) {
                        const year = currentYear - i;
                        const option = document.createElement('option');
                        option.value = year;
                        option.textContent = year + 'å¹´';
                        yearSelect.appendChild(option);
                    }
                }
                
                // åˆå§‹åŒ–æœˆä»½
                if (monthSelect.options.length <= 1) {
                    for (let i = 1; i <= 12; i++) {
                        const option = document.createElement('option');
                        option.value = i;
                        option.textContent = i + 'æœˆ';
                        monthSelect.appendChild(option);
                    }
                }
                
                // åˆå§‹åŒ–æ—¥æœŸ
                if (daySelect.options.length <= 1) {
                    for (let i = 1; i <= 31; i++) {
                        const option = document.createElement('option');
                        option.value = i;
                        option.textContent = i + 'æ—¥';
                        daySelect.appendChild(option);
                    }
                }
            }, 100); // å»¶è¿Ÿ100msç¡®ä¿DOMå·²ç»å‡†å¤‡å¥½
        }
    </script>
</body>
</html>